---
layout:     post
title:      显卡
subtitle:   NVIDIA
date:       2025-09-11
author:     LXG
header-img: img/post-bg-nvida.jpg
catalog: true
tags:
    - 硬件
---

## 显卡厂商

| 厂商                     | 主要系列 / 特点                      |
| ---------------------- | ------------------------------ |
| **华硕（ASUS）**           | ROG Strix、TUF Gaming，散热强、超频版丰富 |
| **技嘉（Gigabyte）**       | AORUS、Gaming OC，性价比高，散热设计出色    |
| **微星（MSI）**            | Gaming X Trio、Ventus，风冷/水冷系列齐全 |
| **影驰（GALAX / Galaxy）** | Hall of Fame (HOF)、EX系列，外观酷炫   |
| **七彩虹（Colorful）**      | iGame 系列，国内性价比高                |
| **索泰（ZOTAC）**          | AMP、Twin Edge 系列，迷你卡/ITX卡优势    |
| **映众（Inno3D）**         | iChill 系列，海外知名品牌，散热设计多样        |
| **耕升（Gainward）**       | Phoenix、Ghost 系列，欧洲市场常见        |


## NVIDIA RTX3070

[RTX3070](https://www.nvidia.cn/geforce/graphics-cards/30-series/rtx-3070-3070ti/)

| 参数            | 规格                                                               |
| ------------- | ---------------------------------------------------------------- |
| **GPU 架构**    | Ampere                                                           |
| **CUDA 核心**   | 5888                                                             |
| **RT 核心**     | 46（第二代）                                                          |
| **Tensor 核心** | 184（第三代）                                                         |
| **基础频率**      | 1500 MHz（参考公版）                                                   |
| **加速频率**      | 1725 MHz（参考公版）                                                   |
| **显存容量**      | 8 GB GDDR6                                                       |
| **显存位宽**      | 256-bit                                                          |
| **显存带宽**      | 448 GB/s                                                         |
| **TDP（功耗）**   | 220 W（参考公版）                                                      |
| **供电接口**      | 2 × 8-Pin PCIe（公版）                                               |
| **推荐电源**      | 650 W 及以上                                                        |
| **显示接口**      | 3 × DisplayPort 1.4a，1 × HDMI 2.1（公版）                            |
| **PCIe 接口**   | PCIe 4.0 x16（向下兼容 PCIe 3.0）                                      |
| **支持技术**      | 光线追踪 (Ray Tracing)，DLSS 2.0/3.0，PCIe Resizable BAR，NVIDIA Reflex |

## 技嘉RTX3070

![jijia_rtx3070](/images/nvidia/jijia_rtx3070.jpg)

**主板接口**

| 接口           | 规格                          | 说明                    |
| ------------ | --------------------------- | --------------------- |
| **PCIe x16** | PCIe 4.0 x16（向下兼容 PCIe 3.0） | 用于显卡和主板/CPU 之间高速数据传输  |
| 带宽           | PCIe 4.0 x16 = 31.5 GB/s 双向 | 供 GPU 传输数据到 CPU 或系统内存 |

**显示接口**

| 接口类型                 | 数量（公版/常见 AIB）        | 最大分辨率           | 说明                 |
| -------------------- | -------------------- | --------------- | ------------------ |
| **HDMI 2.1**         | 1 个（公版） / 多数 AIB 2 个 | 7680×4320\@60Hz | 支持 4K、8K、VRR、HDR   |
| **DisplayPort 1.4a** | 3 个（公版）              | 7680×4320\@60Hz | 支持 4K/8K、高刷新率、多显示器 |

**查看当前主板接口命令**

```bash

$ sudo dmidecode -t 9

# dmidecode 3.3
Getting SMBIOS data from sysfs.
SMBIOS 3.3.0 present.

Handle 0x003E, DMI type 9, 17 bytes
System Slot Information
	Designation: PCIEX16_1
	Type: x16 PCI Express x16
	Current Usage: In Use
	Length: Long
	ID: 0
	Characteristics:
		3.3 V is provided
		PME signal is supported
	Bus Address: 0000:00:03.1

Handle 0x003F, DMI type 9, 17 bytes
System Slot Information
	Designation: PCIEX16_2
	Type: x4 PCI Express x16
	Current Usage: Available
	Length: Long
	ID: 1
	Characteristics:
		3.3 V is provided
		PME signal is supported
	Bus Address: 0000:00:1f.7

Handle 0x0040, DMI type 9, 17 bytes
System Slot Information
	Designation: PCIEX1
	Type: x1 PCI Express x1
	Current Usage: Available
	Length: Short
	ID: 2
	Characteristics:
		3.3 V is provided
		PME signal is supported
	Bus Address: 0000:00:1f.7

```

**总结**

| 插槽         | 类型                  | 长度    | 当前使用情况    | 备注            |
| ---------- | ------------------- | ----- | --------- | ------------- |
| PCIEX16\_1 | x16 PCI Express x16 | Long  | In Use    | 通常是主显卡插槽，已被占用 |
| PCIEX16\_2 | x4 PCI Express x16  | Long  | Available | 辅助显卡或扩展设备可用   |
| PCIEX1     | x1 PCI Express x1   | Short | Available | 小型扩展卡使用       |

## 供电接口

![ji_jia_rtx3070_power](/images/nvidia/ji_jia_rtx3070_power.png)

```markdown

                 ┌───────────────────────────┐
                 │         RTX 3070          │
                 │                           │
 PCIe x16 75W  ─►│                           │
     (数据+电力) │        GPU / 显存         │
                 │                           │
 8-pin 150W ───►│                           │
                 │                           │
 8-pin 150W ───►│                           │
                 │                           │
                 └───────────────────────────┘
                           │
                           ▼
                   功耗实际约 220~250W

```

* 每个 8-pin PCIe 最大可提供 150 W
* 两个接口总共提供 300 W，可以完全满足 RTX 3070 公版 ~220 W 的功耗需求
* PCIe 插槽提供额外 75 W，总功率可达 375 W → 足够显卡稳定运行

## 显卡单独供电的风险

```markdown

          ┌─────────────┐
          │   主电源    │
          │   500W      │
          │             │
          │  CPU / 主板 │
          │  硬盘 / 风扇│
          └─────┬───────┘
                │
   数据+电力 75W│
   ┌───────────►│ PCIe x16 ────────────────┐
   │            │                            │
   │            ▼                            ▼
          ┌─────────────┐          ┌─────────────┐
          │ RTX 3070    │          │ 独立电源    │
          │ GPU / 显存  │          │ 供显卡 12V  │
          │ PCIe 75W     │          │ 8-pin ×2    │
          │ 8-pin ×2     │◄─────────┘ 150W ×2   │
          │ 150W×2       │
          └─────────────┘

```

**不共地的风险**

```diff

主电源 (500W)          独立电源 (显卡)
+12V  ──► CPU / 主板     +12V ──► GPU 8-pin
GND ──┐                  GND ──┐
      └───────────────────────► GPU PCIe/GPU地

```

如果两边地线 不连接（不共地），显卡的 PCIe 插槽和 8-pin 插座的地电位可能不同, 电位差会导致：

* 电流走最短或意外路径，例如通过显卡内部电路或主板的信号线回流。
* 可能烧毁显卡内部电路、PCIe 接口甚至主板。

## 电源负载评估

**当前配置**

| 硬件组件                    | 功耗估算 (W) |
| ----------------------- | -------- |
| CPU (Ryzen 9 5950X)     | 105\~125 |
| 内存 + 主板 + NVMe SSD + 风扇 | 50\~70   |
| 机械硬盘 (7.45TB)           | 10\~15   |
| 显卡 (GT 710)             | 19       |
| USB 外设 + 其他             | 10\~15   |
| **总计**                  | 194\~244 |
| **500W 电源剩余容量**         | 256\~306 |


**查看 GPU 当前功耗和功耗上限**

```bash

nvidia-smi -q -i 0 | grep -i "Power"

```

**设置功耗上限（例如限制为 180W）**

```bash

sudo nvidia-smi -i 0 -pl 180

```

**监控功耗和温度**

```bash

watch -n 1 nvidia-smi

```

**修改后配置**

| 硬件组件                    | 功耗估算 (W) |
| ----------------------- | -------- |
| CPU (Ryzen 9 5950X)     | 105\~125 |
| 内存 + 主板 + NVMe SSD + 风扇 | 50\~70   |
| 机械硬盘 (7.45TB)           | 10\~15   |
| 显卡 (RTX 3070)             | 180      |
| USB 外设 + 其他             | 10\~15   |
| **总计**                  | 305\~405 |
| **500W 电源剩余容量**         | 95\~195 |

## 更新驱动

**命令查看推荐的驱动版本**

```bash

$ ubuntu-drivers devices
== /sys/devices/pci0000:00/0000:00:03.1/0000:07:00.0 ==
modalias : pci:v000010DEd00002484sv00007377sd00001501bc03sc00i00
vendor   : NVIDIA Corporation
model    : GA104 [GeForce RTX 3070]
driver   : nvidia-driver-580-server - distro non-free
driver   : nvidia-driver-570 - distro non-free
driver   : nvidia-driver-535-server-open - distro non-free
driver   : nvidia-driver-470-server - distro non-free
driver   : nvidia-driver-580 - distro non-free recommended  (推荐版本)
driver   : nvidia-driver-550-open - distro non-free
driver   : nvidia-driver-570-open - distro non-free
driver   : nvidia-driver-550 - distro non-free
driver   : nvidia-driver-580-server-open - distro non-free
driver   : nvidia-driver-570-server - distro non-free
driver   : nvidia-driver-470 - distro non-free
driver   : nvidia-driver-535-server - distro non-free
driver   : nvidia-driver-570-server-open - distro non-free
driver   : nvidia-driver-535 - distro non-free
driver   : nvidia-driver-545 - distro non-free
driver   : nvidia-driver-535-open - distro non-free
driver   : nvidia-driver-580-open - distro non-free
driver   : nvidia-driver-545-open - distro non-free
driver   : xserver-xorg-video-nouveau - distro free builtin

```

**当前版本输出**

```bash

$ nvidia-smi
Fri Sep 12 10:32:04 2025       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 470.256.02   Driver Version: 470.256.02   CUDA Version: 11.4     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:07:00.0  On |                  N/A |
|  0%   41C    P3    42W / 180W |   1253MiB /  7979MiB |      2%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      1808      G   /usr/lib/xorg/Xorg                861MiB |
|    0   N/A  N/A      1942      G   /usr/bin/gnome-shell              207MiB |
|    0   N/A  N/A      4852      G   ...on=20250910-180038.780000      181MiB |
+-----------------------------------------------------------------------------+

```

**安装推荐版本**

```bash

sudo apt update
sudo apt install nvidia-driver-580
sudo reboot

```

**升级之后的驱动版本**

```bash

Fri Sep 12 13:47:06 2025       
+-----------------------------------------------------------------------------------------+
| NVIDIA-SMI 580.65.06              Driver Version: 580.65.06      CUDA Version: 13.0     |
+-----------------------------------------+------------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |
|                                         |                        |               MIG M. |
|=========================================+========================+======================|
|   0  NVIDIA GeForce RTX 3070        Off |   00000000:07:00.0  On |                  N/A |
| 30%   40C    P8             21W /  180W |     780MiB /   8192MiB |      2%      Default |
|                                         |                        |                  N/A |
+-----------------------------------------+------------------------+----------------------+

+-----------------------------------------------------------------------------------------+
| Processes:                                                                              |
|  GPU   GI   CI              PID   Type   Process name                        GPU Memory |
|        ID   ID                                                               Usage      |
|=========================================================================================|
|    0   N/A  N/A            1921      G   /usr/lib/xorg/Xorg                      345MiB |
|    0   N/A  N/A            2060      G   /usr/bin/gnome-shell                    184MiB |
|    0   N/A  N/A            3976      G   ...ersion=20250911-180046.637000        205MiB |
+-----------------------------------------------------------------------------------------+

```

















