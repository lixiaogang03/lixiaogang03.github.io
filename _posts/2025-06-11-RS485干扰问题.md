---
layout:     post
title:      RS485 干扰问题
subtitle:   语法
date:       2025-06-11
author:     LXG
header-img: img/post-bg-board.jpg
catalog: true
tags:
    - 硬件
---

## 问题现象

![a133_bf_485](/images/hardware/a133_bf_485.png)

当安卓屏幕通过485发送数据时，接收端并没有返回数据的情况下，有乱码出现

## RS485信号干扰的情形

| 干扰类型 | 说明 | 表现 |
|----------|------|------|
| **共模干扰** | A/B 两线同时叠加相同干扰（如雷击、电源浮动） | 若超出芯片共模范围（±7V/±15V），可能烧毁或收错数据 |
| **地电位差** | 不同设备接地不一致，导致地环流 | 串口烧毁或通信极不稳定 |
| **电磁干扰（EMI）** | 电机、继电器、高频设备产生的辐射干扰 | 出现乱码、丢帧、通信断 |
| **信号反射** | 总线过长或无终端电阻时发生 | 波形畸变，偶发错码 |
| **空悬线路干扰** | 总线空闲时未加偏置电阻，电平不稳定 | 接收误判为起始位，接收到乱码 |
| **串扰干扰** | 相邻信号线耦合，如 RS485 与 PWM、CLK 同排 | 数据抖动、偶尔乱码 |
| **电源噪声耦合** | 电源不稳或噪声通过 GND 回路耦合 | 随机错误数据，通信不稳定 |
| **多节点总线争用** | 多节点同时驱动总线（DE 控制错误） | 冲突数据、乱码 |
| **静电干扰（ESD）** | 接线或操作中静电放电 | 接口失效或临时中断 |
| **雷击感应干扰** | 户外/长线易感应雷电高压 | 通信失败甚至烧毁接口 |

## 常见对策

| 问题来源 | 推荐对策 |
|----------|----------|
| 共模干扰 | 使用共模抑制能力强的 RS485 芯片（如 SN65HVD）+ TVS 管 |
| 地电位差 | 使用光耦/电源隔离型 RS485 模块，或统一可靠接地 |
| 电磁干扰 | 屏蔽双绞线、滤波、电缆远离干扰源 |
| 信号反射 | 总线两端加 120Ω 终端电阻，阻抗匹配 |
| 空悬线路 | 加偏置电阻：A 上拉、B 下拉（各680Ω~1kΩ） |
| 串扰干扰 | 分离布线、屏蔽接地 |
| 电源干扰 | LC 滤波、电源稳压、数字与功率隔离 |
| 总线争用 | 软件控制 DE 正确，或使用自动方向控制芯片 |
| 静电/雷击 | 使用 TVS 管、外壳接地、防雷器保护 |

## 485 原理图分析

![A133_BF_485](/images/hardware/A133_BF_485.png)

JK_NSMD010 是一种 PPTC (Polymeric Positive Temperature Coefficient) 自恢复保险丝。

这种器件的主要作用是过流保护。当电路中的电流超过其额定值时，PPTC元件的电阻会迅速增加，从而限制电流，保护下游电路。当故障条件消除后，它的电阻会恢复到较低的初始状态，从而实现“自恢复”功能，不需要手动更换。

## TVS管的基本原理

TVS（瞬态电压抑制器）是一种用于保护电路免受瞬态高压尖峰影响的器件，其工作原理是通过快速将高阻抗状态转变为低阻抗状态来吸收过电压

## A133 的供电电压

![a133_vcc](/images/hardware/a133_vcc.png)

![a133_axp707_aldo3](/images/hardware/a133_axp707_aldo3.png)

![a133_VCC-PL](/images/hardware/a133_VCC-PL.png)

![a133_485_vcc-pl](/images/hardware/a133_485_vcc-pl.png)

SOC耐受性： 在提高VCC-PL之前，你必须检查你的SOC（片上系统）的数据手册，以确保其S_UART_TX7/S_UART_RX7引脚（以及它们所属的整个I/O库）能够安全地承受更高的电压。超过最大绝对额定值可能会对SOC造成永久性损坏。

图中 VCC-PL 为 串口方向控制部分（Q22/Q23）提供偏置电源，具体是对 MCU/UART IO 与 RS232/RS485 的电平兼容做了适配。下面我详细解释它在 RS-485 中的作用和 VCC-PL 选 1.8V vs 3.3V 的影响：

在原理图中：

- `Q22` / `Q23` 是 N 沟道 MOS 管（BSN20），用于 **电平转换**
- 左边：`S_UART_TX7` / `RX7` 为 MCU 的串口 IO
- 右边：`TXD7-232` / `RXD7-232` 为接口层逻辑信号
- `VCC-PL` 通过 `4.7kΩ` 电阻为 MOS 管提供上拉电源

MOS 管导通后会拉低输出，从而实现 UART 信号电平从 MCU 侧转换到接口侧。

## 🧪 VCC-PL 为 1.8V 与 3.3V 的差异

| 比较项 | VCC-PL = 1.8V | VCC-PL = 3.3V |
|--------|----------------|----------------|
| TXD7-232/RXD7-232 电平 | 最大输出为 1.8V | 最大输出为 3.3V |
| RS-485 芯片兼容性 | ❌ 可能电平不足 | ✅ 与大多数 RS-485 芯片兼容 |
| 抗干扰能力 | 电平摆幅小，抗干扰弱 | 电平摆幅大，抗干扰强 |
| RS232 驱动芯片（如 SP3232）兼容性 | ❌ 可能不能识别 | ✅ 稳定驱动 |























